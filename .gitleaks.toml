# Gitleaks configuration
# See: https://github.com/gitleaks/gitleaks#configuration

title = "InferaDB Deploy Gitleaks Config"

[extend]
# Extend the default gitleaks config
useDefault = true

# Allowlist for false positives
[allowlist]
description = "Allowlist for InferaDB deploy repository"

# Paths to ignore
paths = [
  '''\.terraform/''',
  '''load-tests/results/''',
  '''docs/''',
  '''\.md$''',
]

# Regex patterns to ignore
regexes = [
  # Terraform resource IDs that look like secrets
  '''arn:aws:.*:EXAMPLE''',
  # Placeholder values in documentation
  '''YOUR_.*_HERE''',
  '''<.*_KEY>''',
  # Test fixture values
  '''test[-_]?secret''',
  '''example[-_]?key''',
]

# Specific commit fingerprints to allowlist (false positives)
commits = [
  # bootstrap-secrets.sh line 21: "=== Step 1: SOPS Age Key Generation ===" is documentation, not a secret
  "6e6068fbc04b12132076a6039163124145f4b1ca",
]

# Additional rules to disable if causing false positives
# [[rules]]
# id = "some-rule-id"
# description = "Reason for disabling"
# regex = '''pattern'''
# allowlist = { regexes = ['...'] }
